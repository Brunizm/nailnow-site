<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Auth - NailNow</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        color-scheme: light dark;
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont,
          "Segoe UI", sans-serif;
      }
      body {
        margin: 0;
        padding: 2rem;
        background: #f6f7fb;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
      }
      .card {
        background: #ffffff;
        border-radius: 16px;
        box-shadow: 0 12px 30px rgba(69, 39, 160, 0.12);
        padding: 2rem 2.5rem;
        max-width: 420px;
        width: 100%;
      }
      h2 {
        margin-top: 0;
        margin-bottom: 1.5rem;
        font-size: 1.75rem;
        color: #4527a0;
        text-align: center;
      }
      label,
      input,
      button {
        display: block;
        width: 100%;
      }
      input {
        margin-bottom: 1rem;
        padding: 0.85rem 1rem;
        border-radius: 12px;
        border: 1px solid #d7d6e6;
        font-size: 1rem;
      }
      input:focus {
        outline: none;
        border-color: #4527a0;
        box-shadow: 0 0 0 3px rgba(69, 39, 160, 0.15);
      }
      .radio-group {
        display: flex;
        gap: 1rem;
        margin-bottom: 1.5rem;
      }
      .radio-group label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.95rem;
        color: #2f2d3d;
      }
      .radio-group input {
        width: auto;
        margin: 0;
      }
      button {
        background: #4527a0;
        color: #ffffff;
        border: none;
        border-radius: 999px;
        padding: 0.9rem 1rem;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }
      button:hover {
        transform: translateY(-1px);
        box-shadow: 0 10px 18px rgba(69, 39, 160, 0.18);
      }
      button:active {
        transform: translateY(0);
        box-shadow: none;
      }
    </style>
  </head>
  <body>
    <main class="card">
      <h2>Criar conta</h2>
      <input id="nome" placeholder="Nome" required />
      <input id="email" placeholder="E-mail" required />
      <input id="senha" placeholder="Senha" type="password" required />
      <div class="radio-group">
        <label>
          <input type="radio" name="tipo" value="cliente" checked />
          Cliente
        </label>
        <label>
          <input type="radio" name="tipo" value="profissional" />
          Profissional
        </label>
      </div>
      <button id="botaoCadastrar">Cadastrar</button>
    </main>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
      import {
        getAuth,
        createUserWithEmailAndPassword,
        signInWithEmailAndPassword,
      } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
      import {
        getFirestore,
        doc,
        setDoc,
        serverTimestamp,
      } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyBHVZ9M6btJemXCIG-g5dG0xWq_jy50H7o",
        authDomain: "nailnow-site.firebaseapp.com",
        projectId: "nailnow-site",
        storageBucket: "nailnow-site.appspot.com",
        messagingSenderId: "726392294571",
        appId: "1:726392294571:web:a363a40231f7ac162e7bee",
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);

      async function registrarUsuario(nome, email, senha, role) {
        try {
          const cred = await createUserWithEmailAndPassword(auth, email, senha);
          const uid = cred.user.uid;

          await setDoc(doc(db, role, uid), {
            authUid: uid,
            name: nome,
            email,
            role,
            createdAt: serverTimestamp(),
            status: "ativo",
          });

          alert("UsuÃ¡rio criado com sucesso!");
        } catch (err) {
          alert("Erro: " + err.message);
        }
      }

      document
        .getElementById("botaoCadastrar")
        .addEventListener("click", async () => {
          const nome = document.getElementById("nome").value;
          const email = document.getElementById("email").value;
          const senha = document.getElementById("senha").value;
          const role = document.querySelector('input[name="tipo"]:checked').value;
          await registrarUsuario(nome, email, senha, role);
        });
    </script>
  </body>
</html>
