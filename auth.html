<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Auth - NailNow</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        color-scheme: light dark;
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont,
          "Segoe UI", sans-serif;
      }
      body {
        margin: 0;
        padding: 2rem;
        background: #f6f7fb;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
      }
      .card {
        background: #ffffff;
        border-radius: 16px;
        box-shadow: 0 12px 30px rgba(69, 39, 160, 0.12);
        padding: 2rem 2.5rem;
        max-width: 420px;
        width: 100%;
      }
      h2 {
        margin-top: 0;
        margin-bottom: 1.5rem;
        font-size: 1.75rem;
        color: #4527a0;
        text-align: center;
      }
      label,
      input,
      button {
        display: block;
        width: 100%;
      }
      input {
        margin-bottom: 1rem;
        padding: 0.85rem 1rem;
        border-radius: 12px;
        border: 1px solid #d7d6e6;
        font-size: 1rem;
      }
      input:focus {
        outline: none;
        border-color: #4527a0;
        box-shadow: 0 0 0 3px rgba(69, 39, 160, 0.15);
      }
      .radio-group {
        display: flex;
        gap: 1rem;
        margin-bottom: 1.5rem;
      }
      .radio-group label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.95rem;
        color: #2f2d3d;
      }
      .radio-group input {
        width: auto;
        margin: 0;
      }
      button {
        background: #4527a0;
        color: #ffffff;
        border: none;
        border-radius: 999px;
        padding: 0.9rem 1rem;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }
      button:hover {
        transform: translateY(-1px);
        box-shadow: 0 10px 18px rgba(69, 39, 160, 0.18);
      }
      button:active {
        transform: translateY(0);
        box-shadow: none;
      }
    </style>
  </head>
  <body>
    <main class="card">
      <h2>Criar conta</h2>
      <input id="nome" placeholder="Nome" required />
      <input id="email" placeholder="E-mail" required />
      <input id="senha" placeholder="Senha" type="password" required />
      <div class="radio-group">
        <label>
          <input type="radio" name="tipo" value="cliente" checked />
          Cliente
        </label>
        <label>
          <input type="radio" name="tipo" value="profissional" />
          Profissional
        </label>
      </div>
      <button id="botaoCadastrar">Cadastrar</button>
    </main>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
      import {
        getAuth,
        createUserWithEmailAndPassword,
        signInWithEmailAndPassword,
      } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
      import {
        getFirestore,
        doc,
        setDoc,
        serverTimestamp,
      } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyCFLccZ3khmT8uqoye6n6kfbqMFRzeXybE",
        authDomain: "nailnow-7546c.firebaseapp.com",
        projectId: "nailnow-7546c",
        storageBucket: "nailnow-7546c.firebasestorage.app",
        messagingSenderId: "413820353687",
        appId: "1:413820353687:web:ad92108dbea59f7749fdd2",
        measurementId: "G-2YEGPEG0E1",
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);

      async function registrarUsuario(nome, email, senha, role) {
        try {
          const senhaLimpa = (senha ?? "").trim();
          const cred = await createUserWithEmailAndPassword(auth, email, senhaLimpa);
          const uid = cred.user.uid;

          await setDoc(doc(db, role, uid), {
            authUid: uid,
            name: nome,
            email,
            senha: senhaLimpa,
            senhaAtualizadaEm: serverTimestamp(),
            role,
            createdAt: serverTimestamp(),
            status: "ativo",
          });

          alert("UsuÃ¡rio criado com sucesso!");
        } catch (err) {
          alert("Erro: " + err.message);
        }
      }

      document
        .getElementById("botaoCadastrar")
        .addEventListener("click", async () => {
          const nome = document.getElementById("nome").value;
          const email = document.getElementById("email").value;
          const senha = document.getElementById("senha").value;
          const role = document.querySelector('input[name="tipo"]:checked').value;
          await registrarUsuario(nome, email, senha, role);
        });
    </script>
    <a
    class="whatsapp-widget"
    href="https://wa.me/555191518097"
    target="_blank"
    rel="noopener noreferrer"
    aria-label="Fale com a NailNow pelo WhatsApp"
  >
    <span class="whatsapp-widget__icon" aria-hidden="true">
      <svg viewBox="0 0 32 32" role="img" aria-hidden="true">
        <path
          d="M19.1 17.4c-.3-.1-1.7-.8-2-1-.3-.1-.5-.2-.7.2-.2.3-.8 1-.9 1.2-.2.2-.3.2-.6.1-.3-.1-1.2-.4-2.3-1.4-.8-.7-1.3-1.6-1.5-1.9-.1-.3 0-.5.1-.6.1-.1.3-.3.4-.5.1-.2.2-.3.3-.4.1-.2 0-.3 0-.5-.1-.1-.7-1.7-1-2.3-.3-.6-.5-.5-.7-.5h-.6c-.2 0-.5.1-.7.3s-1 1-1 2.4 1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.6.2-1.1.2-1.3-.1-.1-.3-.2-.6-.3zm-3.1 10.1c-2.1 0-4.1-.5-6-1.6l-4.1 1.1 1.2-4c-1.2-2-1.8-4.2-1.8-6.6C5.3 9 10.2 4.2 16 4.2c2.8 0 5.4 1.1 7.3 3 1.9 1.9 3 4.5 3 7.3 0 5.8-4.8 10.6-10.6 10.6zm0-21.1c-5.8 0-10.6 4.7-10.6 10.5 0 2.2.7 4.3 1.9 6l-1.2 3.9 4-1.1c1.7 1 3.8 1.5 5.9 1.5 5.8 0 10.5-4.7 10.5-10.6 0-5.8-4.7-10.5-10.5-10.5z"
        />
      </svg>
    </span>
    <span class="whatsapp-widget__text">WhatsApp</span>
  </a>
</body>
</html>
